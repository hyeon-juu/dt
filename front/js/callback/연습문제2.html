<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css
/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-4">
        <input type="text">
        <button>search</button>
        <h2>야간 약국 정보</h2>
        <div id="content"></div>
    </div>

    <script>
        const input = document.querySelector("input");
        const button = document.querySelector("button");
        const content = document.querySelector('#content');
        button.addEventListener('click', () => {
            let search = input.value;
            getData(search);
        })
        function getData(search) {
            content.innerHTML = "";
            const url =
                `https://ggoreb.pythonanywhere.com/night_pharmacy/data/?search=${search}`;
            const res = fetch(url);
            res.then((data) => {
                return data.json();
            }).then((d) => {
                // let html = ` 
                // <table class="table table-bordered table-striped">
                //     <thead class="table-dark">
                //         <tr>
                //             <th>약국명</th>
                //             <th>전화번호</th>
                //             <th>주소</th>
                //         </tr>
                //         </thead>
                //         `

                // d.data.forEach(v => {
                //     const name = v.name;
                //     const tel = v.tel;
                //     const road_address = v.road_address;
                //     html += `
                //         <tr>
                //             <td>${name}</td>
                //             <td>${tel}</td>
                //             <td>${road_address}</td>
                //         </tr>
                //         `
                // });
                // html += `</table>`;
                // content.innerHTML += html;


                let html = ` 
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>약국명</th>
                        <th>전화번호</th>
                        <th>주소</th>
                    </tr>
                    </thead>
                    `


                for (let i of d.data) {
                    // console.log(i)
                    html += `
                    <tr>
                        <td>${i.name}</td>
                        <td>${i.tel}</td>
                        <td>${i.road_address}</td>
                    </tr>
                    `
                }
                html += `</table>`;
                content.innerHTML += html;
            })
        }




    </script>
</body>
<!-- 콜백 있으면 비동기 아니면 논블로킹 -->